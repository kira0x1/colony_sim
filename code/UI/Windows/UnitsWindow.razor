@using Sandbox.UI
@attribute [StyleSheet]
@inherits Kira.UI.BaseNavWindow
@namespace Kira.UI

@if (!IsActive) return;
<root>
    <WindowContent>
        <Header>Meow</Header>
        <Body>meow</Body>
    </WindowContent>
</root>

@code
{
    private bool UnitsMenuVisible { get; set; }
    private ColonyManager Colony { get; set; }
    public VillagerData villagerHovering { get; set; }
    private int hoverId { get; set; }
    public bool IsHoveringVillager { get; set; }
    public override bool IsActive { get; set; }

    public void OnMouseExit(int id)
    {
        if (hoverId == id)
            IsHoveringVillager = false;
    }

    private void OnMouseOver(VillagerData data, int id)
    {
        hoverId = id;
        villagerHovering = data;
        IsHoveringVillager = true;
    }

    protected override void OnAfterTreeRender(bool firstTime)
    {
        if (!firstTime)
        {
            return;
        }

        Colony = Scene.Components.GetAll<ColonyManager>().First();
    }

    protected override int BuildHash() => System.HashCode.Combine(IsHoveringVillager, UnitsMenuVisible, IsActive);
}